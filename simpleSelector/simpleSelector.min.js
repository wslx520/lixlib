var SS,simpleSelector=SS=function(){function w(d,e,a){a={string:d};var c;for(e in r)if(c=r[e].exec(d)){var b=id="";a.type=e;a.id="id"===e?c[0].slice(1):(id=d.match(m.id))&&id[0].slice(1);a.tag="tag"===e&&c[0];a.class=(b=d.match(m.class))&&(b+"").replace(",","").replace(/\./g," ");e=void 0;d=(e=m.attr.exec(d))?{name:e[1],operator:e[2],value:e[3]}:void 0;a.attr=d;a.attr&&"name"==a.attr.name&&"="==a.attr.operator&&a.attr.value&&(a.type="name");break}return a}function A(d){var e=[],a;for(a in d)d[a]&&
t[a]&&(t[a].type=a,e.push(t[a]));return function(a){for(var b=!0,f=e.length;f--;)if(!1===e[f](a,d[e[f].type])){b=!1;break}return b}}function q(d,e){var a=d.getAttribute(e.name),c=e.operator,b=e.value;if(null==a)return"!="===c;if(!c)return!0;a+="";return"="===c?a===b:"!="===c?a!==b:"^="===c?b&&0===a.indexOf(b):"*="===c?b&&-1<a.indexOf(b):"$="===c?b&&a.slice(-b.length)===b:"~="===c?-1<(" "+a+" ").indexOf(b):"|="===c?a===b||a.slice(0,b.length+1)===b+"-":!1}function x(d,e){var a=e.pop(),c=(">"===a||"~"===
a||"+"===a)&&a,a=c?e.pop():a,b="parentNode",f,h=w(a),h=A(h),g=[],n=0,p=d.length;console.log(a,c);c&&(">"!==c&&(b="previousSibling"),f="~"!==c);for(;n<p;n++)for(a=d[n],c=a[b];c&&c!==l;){if(1==c.nodeType){if(!0===h(c)){g.push(a);break}if(f)break}c=c[b]}return e[0]&&g[0]?x(g,e):g}var l=document,u=/\s+/g,k=function(d,e){return new RegExp(d,e||"")},B=/^([\w-_]+)?(#|\.)?([\w-_]+)$/,r={id:k("^#[A-Za-z][\\w-_\\:\\.]*"),class:k("^\\.[A-Za-z][\\w-_\\:\\.]*"),tag:k("^[A-Za-z]+[1-6]?"),attr:k("^\\[([\\w-_]+)([\\!\\*\\^\\$\\~|]?\\=)?(\\w+)?\\]"),
pseudo:/^\:(\w-)+/},m={id:/#([\w-_])+/,class:/\.\w+/g,attr:k("\\[([\\w-_]+)([\\!\\*\\^\\$\\~|]?\\=)?(\\w+)?\\]","g")},y=l.getElementsByClassName?function(d,e,a,c){d=(a||l).getElementsByClassName(v(d));if(!e||"*"==e)return d;a=[];for(var b=0,f=d.length,h=!!c;b<f;b++)d[b].tagName===e.toUpperCase()&&(h?q(d[b],c):1)&&a.push(d[b]);return a}:function(d,e,a,c){e=(a||l).getElementsByTagName(e||"*");a=[];var b,f,h,g=!!c;d=v(d).split(u);for(f=0;h=e[f++];)if(!g||q(h,c)){var n=" "+h.className+" ",p=1;for(b=d.length;b--;)if(-1==
n.indexOf(" "+d[b]+" ")){p=0;break}p&&a.push(h)}return a},v=function(d){return d.replace(/^\s+/,"").replace(/\s+$/,"")},t={id:function(d,e){return d.getAttribute("id")===e},class:function(d,e){var a=d.className;e=e.split(u);for(var c=!0,b=e.length;b--;)if(-1===a.search(k("\\b"+e[b]+"\\b"))){c=!1;break}return c},tag:function(d,e){return d.tagName===e.toUpperCase()},attr:q};return function(d,e){var a;"string"===typeof d&&(d=v(d).replace(u," ").replace(/([\>\+\~])/g," $1 "));if(a=B.exec(d)){var c=a[2],
b=a[3];if("#"===c)return l.getElementById(b);if(void 0===c)return l.getElementsByTagName(b);if("."===c)return y(b,a[1])}c=[];selectorArr=d.split(",");oneGroup=1==selectorArr.length;for(a=selectorArr.length;a--;){selectorArr[a]=selectorArr[a].split(/\s+/);var c=selectorArr[a],b=c.pop(),b=w(b),f;b.id?f=l.getElementById(b.id):"name"===b.type?f=l.getElementsByName(b.attr.value):b.class?f=y(b.class,b.tag,doc,b.attr):b.tag&&(f=l.getElementsByTagName(b.tag));console.log(f);var h=[],g=void 0;for(g in b)"string"!==
g&&"type"!==g&&g!==b.type&&b[g]&&h.push(g);console.log(b,h);if(!(1>h.length)){for(var g=0,n=f.length,p=[],k=void 0;g<n;g++){for(var k=f[g],m=!0,q=h.length;q--;){var r=h[q],z=b[r];if(z&&0==t[r](k,z)){m=!m;break}}m&&p.push(k)}f=p}c=c.length?x(f,c):f}return c}}();
